this.primevue=this.primevue||{},this.primevue.virtualscroller=function(t){"use strict";var s={name:"VirtualScroller",emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1}},data(){return{first:this.isBoth()?{rows:0,cols:0}:0,last:this.isBoth()?{rows:0,cols:0}:0,numItemsInViewport:this.isBoth()?{rows:0,cols:0}:0,lastScrollPos:this.isBoth()?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,mounted(){this.init(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},watch:{numToleratedItems(t){this.d_numToleratedItems=t},loading(t){this.d_loading=t},items(t,s){s&&s.length===(t||[]).length||this.init()},orientation(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0}},methods:{init(){this.setSize(),this.calculateOptions(),this.setSpacerSize()},isVertical(){return"vertical"===this.orientation},isHorizontal(){return"horizontal"===this.orientation},isBoth(){return"both"===this.orientation},scrollTo(t){this.element&&this.element.scrollTo(t)},scrollToIndex(t,s="auto"){const e=this.isBoth(),i=this.isHorizontal(),o=this.getContentPosition(),l=(t=0,s)=>t<=s?0:t,r=(t,s,e)=>t*s+e,n=(t=0,e=0)=>this.scrollTo({left:t,top:e,behavior:s});if(e){const s={rows:l(t[0],this.d_numToleratedItems[0]),cols:l(t[1],this.d_numToleratedItems[1])};s.rows===this.first.rows&&s.cols===this.first.cols||(n(r(s.cols,this.itemSize[1],o.left),r(s.rows,this.itemSize[0],o.top)),this.first=s)}else{const s=l(t,this.d_numToleratedItems);s!==this.first&&(i?n(r(s,this.itemSize,o.left),0):n(0,r(s,this.itemSize,o.top)),this.first=s)}},scrollInView(t,s,e="auto"){if(s){const i=this.isBoth(),o=this.isHorizontal(),{first:l,viewport:r}=this.getRenderedRange(),n=(t=0,s=0)=>this.scrollTo({left:t,top:s,behavior:e}),h="to-end"===s;if("to-start"===s){if(i)r.first.rows-l.rows>t[0]?n(r.first.cols*this.itemSize[1],(r.first.rows-1)*this.itemSize[0]):r.first.cols-l.cols>t[1]&&n((r.first.cols-1)*this.itemSize[1],r.first.rows*this.itemSize[0]);else if(r.first-l>t){const t=(r.first-1)*this.itemSize;o?n(t,0):n(0,t)}}else if(h)if(i)r.last.rows-l.rows<=t[0]+1?n(r.first.cols*this.itemSize[1],(r.first.rows+1)*this.itemSize[0]):r.last.cols-l.cols<=t[1]+1&&n((r.first.cols+1)*this.itemSize[1],r.first.rows*this.itemSize[0]);else if(r.last-l<=t+1){const t=(r.first+1)*this.itemSize;o?n(t,0):n(0,t)}}else this.scrollToIndex(t,e)},getRenderedRange(){const t=(t,s)=>Math.floor(t/(s||t));let s=this.first,e=0;if(this.element){const i=this.isBoth(),o=this.isHorizontal(),l=this.element.scrollTop,r=this.element.scrollLeft;if(i)s={rows:t(l,this.itemSize[0]),cols:t(r,this.itemSize[1])},e={rows:s.rows+this.numItemsInViewport.rows,cols:s.cols+this.numItemsInViewport.cols};else{s=t(o?r:l,this.itemSize),e=s+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:s,last:e}}},calculateOptions(){const t=this.isBoth(),s=this.isHorizontal(),e=this.getContentPosition(),i=this.element?this.element.offsetWidth-e.left:0,o=this.element?this.element.offsetHeight-e.top:0,l=(t,s)=>Math.ceil(t/(s||t)),r=t=>Math.ceil(t/2),n=t?{rows:l(o,this.itemSize[0]),cols:l(i,this.itemSize[1])}:l(s?i:o,this.itemSize);let h=this.d_numToleratedItems||(t?[r(n.rows),r(n.cols)]:r(n));const a=(t,s,e,i)=>this.getLast(t+s+(t<e?2:3)*e,i),c=t?{rows:a(this.first.rows,n.rows,h[0]),cols:a(this.first.cols,n.cols,h[1],!0)}:a(this.first,n,h);this.last=c,this.numItemsInViewport=n,this.d_numToleratedItems=h,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=t?Array.from({length:n.rows}).map((()=>Array.from({length:n.cols}))):Array.from({length:n})),this.lazy&&this.$emit("lazy-load",{first:this.first,last:c})},getLast(t=0,s){return this.items?Math.min(s?(this.columns||this.items[0]).length:this.items.length,t):0},getContentPosition(){if(this.content){const t=getComputedStyle(this.content),s=parseInt(t.paddingLeft,10)+Math.max(parseInt(t.left,10),0),e=parseInt(t.paddingRight,10)+Math.max(parseInt(t.right,10),0),i=parseInt(t.paddingTop,10)+Math.max(parseInt(t.top,10),0),o=parseInt(t.paddingBottom,10)+Math.max(parseInt(t.bottom,10),0);return{left:s,right:e,top:i,bottom:o,x:s+e,y:i+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize(){if(this.element){const t=this.isBoth(),s=this.isHorizontal(),e=this.element.parentElement,i=this.scrollWidth||`${this.element.offsetWidth||e.offsetWidth}px`,o=this.scrollHeight||`${this.element.offsetHeight||e.offsetHeight}px`,l=(t,s)=>this.element.style[t]=s;t||s?(l("height",o),l("width",i)):l("height",o)}},setSpacerSize(){const t=this.items;if(t){const s=this.isBoth(),e=this.isHorizontal(),i=this.getContentPosition(),o=(t,s,e,i=0)=>this.spacerStyle={...this.spacerStyle,[`${t}`]:(s||[]).length*e+i+"px"};s?(o("height",t,this.itemSize[0],i.y),o("width",this.columns||t[1],this.itemSize[1],i.x)):e?o("width",this.columns||t,this.itemSize,i.x):o("height",t,this.itemSize,i.y)}},setContentPosition(t){if(this.content){const s=this.isBoth(),e=this.isHorizontal(),i=t?t.first:this.first,o=(t,s)=>t*s,l=(t=0,s=0)=>{this.contentStyle={...this.contentStyle,transform:`translate3d(${t}px, ${s}px, 0)`}};if(s)l(o(i.cols,this.itemSize[1]),o(i.rows,this.itemSize[0]));else{const t=o(i,this.itemSize);e?l(t,0):l(0,t)}}},onScrollPositionChange(t){const s=t.target,e=this.isBoth(),i=this.isHorizontal(),o=this.getContentPosition(),l=(t,s)=>t?t>s?t-s:t:0,r=(t,s)=>Math.floor(t/(s||t)),n=(t,s,e,i,o,l)=>t<=o?o:l?e-i-o:s+o-1,h=(t,s,e,i,o,l,r)=>t<=l?0:Math.max(0,r?t<s?e:t-l:t>s?e:t-2*l),a=(t,s,e,i,o,l)=>{let r=s+i+2*o;return t>=o&&(r+=o+1),this.getLast(r,l)},c=l(s.scrollTop,o.top),m=l(s.scrollLeft,o.left);let d=0,f=this.last,u=!1;if(e){const t=this.lastScrollPos.top<=c,s=this.lastScrollPos.left<=m,e={rows:r(c,this.itemSize[0]),cols:r(m,this.itemSize[1])},i={rows:n(e.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],t),cols:n(e.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],s)};d={rows:h(e.rows,i.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],t),cols:h(e.cols,i.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],s)},f={rows:a(e.rows,d.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:a(e.cols,d.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},u=d.rows!==this.first.rows&&f.rows!==this.last.rows||d.cols!==this.first.cols&&f.cols!==this.last.cols,this.lastScrollPos={top:c,left:m}}else{const t=i?m:c,s=this.lastScrollPos<=t,e=r(t,this.itemSize);d=h(e,n(e,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,s),this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,s),f=a(e,d,this.last,this.numItemsInViewport,this.d_numToleratedItems),u=d!==this.first&&f!==this.last,this.lastScrollPos=t}return{first:d,last:f,isRangeChanged:u}},onScrollChange(t){const{first:s,last:e,isRangeChanged:i}=this.onScrollPositionChange(t);if(i){const t={first:s,last:e};this.setContentPosition(t),this.first=s,this.last=e,this.$emit("scroll-index-change",t),this.lazy&&this.$emit("lazy-load",t)}},onScroll(t){if(this.$emit("scroll",t),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:s}=this.onScrollPositionChange(t);s&&(this.d_loading=!0)}this.scrollTimeout=setTimeout((()=>{this.onScrollChange(t),this.d_loading&&this.showLoader&&!this.lazy&&(this.d_loading=!1)}),this.delay)}else this.onScrollChange(t)},getOptions(t){const s=(this.items||[]).length,e=this.isBoth()?this.first.rows+t:this.first+t;return{index:e,count:s,first:0===e,last:e===s-1,even:e%2==0,odd:e%2!=0}},getLoaderOptions(t,s){let e=this.loaderArr.length;return{index:t,count:e,first:0===t,last:t===e-1,even:t%2==0,odd:t%2!=0,...s}},elementRef(t){this.element=t},contentRef(t){this.content=t}},computed:{containerClass(){return["p-virtualscroller",{"p-both-scroll":this.isBoth(),"p-horizontal-scroll":this.isHorizontal()},this.class]},contentClass(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass(){return["p-virtualscroller-loader",{"p-component-overlay":!this.$slots.loader}]},loadedItems(){const t=this.items;return t&&!this.d_loading?this.isBoth()?t.slice(this.first.rows,this.last.rows).map((t=>this.columns?t:t.slice(this.first.cols,this.last.cols))):this.isHorizontal()&&this.columns?t:t.slice(this.first,this.last):[]},loadedRows(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns(){if(this.columns){const t=this.isBoth(),s=this.isHorizontal();if(t||s)return this.d_loading&&this.loaderDisabled?t?this.loaderArr[0]:this.loaderArr:this.columns.slice(t?this.first.cols:this.first,t?this.last.cols:this.last)}return this.columns}}};const e={key:1,class:"p-virtualscroller-loading-icon pi pi-spinner pi-spin"};return function(t,s){void 0===s&&(s={});var e=s.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===e&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}("\n.p-virtualscroller {\r\n    position: relative;\r\n    overflow: auto;\r\n    contain: strict;\r\n    -webkit-transform: translateZ(0);\r\n            transform: translateZ(0);\r\n    will-change: scroll-position;\r\n    outline: 0 none;\n}\n.p-virtualscroller-content {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    contain: content;\r\n    min-height: 100%;\r\n    min-width: 100%;\r\n    will-change: transform;\n}\n.p-virtualscroller-spacer {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 1px;\r\n    width: 1px;\r\n    -webkit-transform-origin: 0 0;\r\n            transform-origin: 0 0;\r\n    pointer-events: none;\n}\n.p-virtualscroller .p-virtualscroller-loader {\r\n    position: sticky;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\n}\n.p-virtualscroller-loader.p-component-overlay {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n            align-items: center;\r\n    -webkit-box-pack: center;\r\n        -ms-flex-pack: center;\r\n            justify-content: center;\n}\r\n"),s.render=function(s,i,o,l,r,n){return o.disabled?(t.openBlock(),t.createBlock(t.Fragment,{key:1},[t.renderSlot(s.$slots,"default"),t.renderSlot(s.$slots,"content",{items:o.items,rows:o.items,columns:n.loadedColumns})],64)):(t.openBlock(),t.createBlock("div",{key:0,ref:n.elementRef,class:n.containerClass,tabindex:0,style:o.style,onScroll:i[1]||(i[1]=(...t)=>n.onScroll&&n.onScroll(...t))},[t.renderSlot(s.$slots,"content",{styleClass:n.contentClass,items:n.loadedItems,getItemOptions:n.getOptions,loading:r.d_loading,getLoaderOptions:n.getLoaderOptions,itemSize:o.itemSize,rows:n.loadedRows,columns:n.loadedColumns,contentRef:n.contentRef,spacerStyle:r.spacerStyle,contentStyle:r.contentStyle,vertical:n.isVertical(),horizontal:n.isHorizontal(),both:n.isBoth()},(()=>[t.createVNode("div",{ref:n.contentRef,class:n.contentClass,style:r.contentStyle},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(n.loadedItems,((e,i)=>t.renderSlot(s.$slots,"item",{key:i,item:e,options:n.getOptions(i)}))),128))],6)])),o.showSpacer?(t.openBlock(),t.createBlock("div",{key:0,class:"p-virtualscroller-spacer",style:r.spacerStyle},null,4)):t.createCommentVNode("v-if",!0),!o.loaderDisabled&&o.showLoader&&r.d_loading?(t.openBlock(),t.createBlock("div",{key:1,class:n.loaderClass},[s.$slots&&s.$slots.loader?(t.openBlock(!0),t.createBlock(t.Fragment,{key:0},t.renderList(r.loaderArr,((e,i)=>t.renderSlot(s.$slots,"loader",{key:i,options:n.getLoaderOptions(i,n.isBoth()&&{numCols:s.d_numItemsInViewport.cols})}))),128)):(t.openBlock(),t.createBlock("i",e))],2)):t.createCommentVNode("v-if",!0)],38))},s.__file="src/components/virtualscroller/VirtualScroller.vue",s}(Vue);
